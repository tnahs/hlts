{% from "_macros.html" import flash %}


{% macro current(page) -%}

	{% if request.endpoint == page %} current {% endif %}

{% endmacro %}


{% macro icon_img(name) -%}

	{% set classname = name ~ "Icon" %}

	{% if request.endpoint.split(".")[-1] == name %}
		{% set filename = "images/icon_" ~ name ~ "_current.png" %}
	{% else %}
		{% set filename = "images/icon_" ~ name ~ ".png" %}
	{% endif %}

	<img class="{{ classname }}" src="{{ url_for('static', filename=filename) }}"/>

{% endmacro %}


<nav>

	<mainMenu>

		<a id="navDashboard" class="{{ current('main.dashboard') }}" href="{{ url_for('main.dashboard') }}">{{ icon_img("dashboard") }}</a>
		<a id="navIndex" class="{{ current('main.index') }}" href="{{ url_for('main.index', mode='default')}}">index</a>
		<a id="navRecent" class="{{ current('main.recent') }}" href="{{ url_for('main.recent', mode='default') }}">recent</a>
		<a id="navNew" class="{{ current('main.new') }}" href="{{ url_for('main.new') }}">{{ icon_img("new") }}</a>
		<a id="navTrash" class="{{ current('main.trash') }}" href="{{ url_for('main.trash') }}">{{ icon_img("trash") }}</a>
		<a id="navTools" class="{{ current('main.tools') }}" href="{{ url_for('main.tools') }}">{{ icon_img("tools") }}</a>

	</mainMenu>

	<searchMenu>

		{% set search = request.args.get('search') if request.endpoint == "main.search"  else "" %}

		{{ icon_img("search") }}

		<form action="{{ url_for('main.search') }}" method="GET">

			<input type="text" name="search" value="{{ search }}"/>

		</form>

	</searchMenu>

	<userMenu>

		<a class="userMenuButton" href="{{ url_for('user.settings') }}">

			<div class="userMenuInfo">

				<span class="userName">{{ current_user.display_name }}</span>
				<span class="userEmail">{{ current_user.email }}</span>

			</div>

			<img class="userMenuIcon" src="{{ url_for('static', filename='images/icon_settings.png') }}"/>

		</a>

	</userMenu>

	<mainFlash>{{ flash() }}</mainFlash>

</nav>
